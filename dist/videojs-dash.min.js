/**
 * videojs-contrib-dash
 * @version 2.9.1
 * @copyright 2017 Brightcove, Inc
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsDash=e()}}(function(){return function e(t,a,n){function i(r,d){if(!a[r]){if(!t[r]){var s="function"==typeof require&&require;if(!d&&s)return s(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=a[r]={exports:{}};t[r][0].call(u.exports,function(e){var a=t[r][1][e];return i(a||e)},u,u.exports,e,t,a,n)}return a[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){function a(e){return"dash-audio-"+e}function n(e,t){return e.find(function(e){return a(e.index)===t.id})}var i=e.dash.mediaPlayer,o=i.getTracksFor("audio"),r=e.audioTracks();r.length&&t.clearTracks(["audio"]);var d=i.getCurrentTrackFor("audio");o.forEach(function(e){var t=e.lang;e.roles&&e.roles.length&&(t+=" ("+e.roles.join(", ")+")"),r.addTrack(new s["default"].AudioTrack({enabled:e===d,id:a(e.index),kind:e.kind||"main",label:t,language:e.lang}))}),r.addEventListener("change",function(){for(var e=0;e<r.length;e++){var t=r[e];if(t.enabled){var a=n(o,t);i.setCurrentTrack(a)}else;}})}function i(e,t){e.dash.mediaPlayer.on(r["default"].MediaPlayer.events.PLAYBACK_METADATA_LOADED,n.bind(null,e,t))}a.__esModule=!0,a["default"]=i;var o="undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null,r=t(o),d="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,s=t(d)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return e[a]}function i(e,t,a){function i(){for(var t=e.dash.mediaPlayer,i=e.textTracks(),r=-1,d=0;d<i.length;d+=1)!function(e){var t=i[e];if("showing"===t.mode){var d=n(o,function(e){return e.textTrack===t}),s=d?d.dashTrack:null;s&&(r=a.indexOf(s))}}(d);r!==t.getCurrentTextTrackIndex()&&t.setTextTrack(r)}var o=[],r=a.map(function(e){return{dashTrack:e,trackConfig:{label:e.lang,language:e.lang,srclang:e.lang}}}).map(function(t){var a=t.trackConfig,n=t.dashTrack,i=e.addRemoteTextTrack(a,!0);return o.push({textTrack:i.track,dashTrack:n}),i});return e.textTracks().on("change",i),e.one("loadstart",function(){e.textTracks().off("change",i)}),i(),r}function o(e,t,a){function n(){s.forEach(e.removeRemoteTextTrack.bind(e)),s=[]}function o(r){var l=(r.index,r.tracks);u.off(d["default"].MediaPlayer.events.TEXT_TRACKS_ADDED,o),n(),l.length&&(s=i(e,t,l,a))}function r(){u.off(d["default"].MediaPlayer.events.TEXT_TRACKS_ADDED,o),e.one("loadstart",n)}window.VTTCue&&!/\[native code\]/.test(window.VTTCue.toString())&&(window.VTTCue=!1);var s=[];if(t.featuresNativeTextTracks)return void l["default"].log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");var u=e.dash.mediaPlayer;u.on(d["default"].MediaPlayer.events.TEXT_TRACKS_ADDED,o),u.on(d["default"].MediaPlayer.events.CAN_PLAY,r)}a.__esModule=!0,a["default"]=o;var r="undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null,d=t(r),s="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,l=t(s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,a){(function(e){var a;a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,a){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.__esModule=!0;var o=e("global/window"),r=n(o),d="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,s=n(d),l="undefined"!=typeof window?window.dashjs:void 0!==t?t.dashjs:null,u=n(l),f=e("./setup-audio-tracks"),c=n(f),h=e("./setup-text-tracks"),y=n(h),p=function(){function e(t,a,n){var o=this;if(i(this,e),n=n||a.options_,this.player=(0,s["default"])(n.playerId),this.player.dash=this.player.dash||{},this.tech_=a,this.el_=a.el(),this.elParent_=this.el_.parentNode,t.src){a.isReady_=!1,e.updateSourceData&&(s["default"].log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=e.updateSourceData(t)),e.hooks("updatesource").forEach(function(e){t=e(t)});var r=t.src;this.keySystemOptions_=e.buildDashJSProtData(t.keySystemOptions),this.player.dash.mediaPlayer=u["default"].MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,e.useVideoJSDebug&&(s["default"].log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.useVideoJSDebug(this.mediaPlayer_)),e.beforeInitialize&&(s["default"].log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.beforeInitialize(this.player,this.mediaPlayer_)),e.hooks("beforeinitialize").forEach(function(e){e(o.player,o.mediaPlayer_)}),this.mediaPlayer_.initialize(),n.dash&&Object.keys(n.dash).forEach(function(e){var t,a="set"+e.charAt(0).toUpperCase()+e.slice(1),i=n.dash[e];if(o.mediaPlayer_.hasOwnProperty(a)&&(s["default"].log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+a+"'"),e=a),!o.mediaPlayer_.hasOwnProperty(e))return void s["default"].log.warn("Warning: dash configuration option unrecognized: "+e);Array.isArray(i)||(i=[i]),(t=o.mediaPlayer_)[e].apply(t,i)}),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),c["default"].call(null,this.player,a),y["default"].call(null,this.player,a,n),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(r),this.tech_.triggerReady()}}return e.buildDashJSProtData=function(e){var t={};if(!e||!Array.isArray(e))return null;for(var a=0;a<e.length;a++){var n=e[a],i=s["default"].mergeOptions({},n.options);i.licenseUrl&&(i.serverURL=i.licenseUrl,delete i.licenseUrl),t[n.name]=i}return t},e.prototype.dispose=function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.player.dash&&delete this.player.dash},e.prototype.seekable=function(){if(this.el_.duration===Number.MAX_VALUE){if(!this.seekableStart_){var e=this.el_.currentTime;this.seekableStart_=e?e-this.mediaPlayer_.time():undefined}if(this.seekableStart_){var t=this.seekableStart_+this.mediaPlayer_.getDVRWindowSize(),a=this.seekableStart_;return{start:function(){return a},end:function(){return t},length:1}}}var n=this.el_.seekable;return n.length>0&&n.end(n.length-1)===Number.MAX_VALUE?{start:function(){return 0},end:function(){return Infinity},length:1}:n},e.prototype.duration=function(){var e=this.el_.duration;if(e===Number.MAX_VALUE){var t=this.mediaPlayer_.getDVRWindowSize();return t||Infinity}return e},e.hooks=function(t,a){return e.hooks_[t]=e.hooks_[t]||[],a&&(e.hooks_[t]=e.hooks_[t].concat(a)),e.hooks_[t]},e.hook=function(t,a){e.hooks(t,a)},e.removeHook=function(t,a){var n=e.hooks(t).indexOf(a);return-1!==n&&(e.hooks_[t]=e.hooks_[t].slice(),e.hooks_[t].splice(n,1),!0)},e}();p.hooks_={};var w=function(e){e=JSON.parse(JSON.stringify(e)),p.updateSourceData&&(s["default"].log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=p.updateSourceData(e)),p.hooks("updatesource").forEach(function(t){e=t(e)});var t=document.createElement("video");return!(e.keySystemOptions&&!navigator.requestMediaKeySystemAccess&&!t.msSetMediaKeys)};s["default"].DashSourceHandler=function(){return{canHandleSource:function(e){var t=/\.mpd/i;return w(e)?s["default"].DashSourceHandler.canPlayType(e.type)?"probably":t.test(e.src)?"maybe":"":""},handleSource:function(e,t,a){return new p(e,t,a)},canPlayType:function(e){return s["default"].DashSourceHandler.canPlayType(e)}}},s["default"].DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},r["default"].MediaSource&&s["default"].getTech("Html5").registerSourceHandler(s["default"].DashSourceHandler(),0),s["default"].Html5DashJS=p,a["default"]=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./setup-audio-tracks":1,"./setup-text-tracks":2,"global/window":3}]},{},[4])(4)});